/**
 * 
 * @authors Your Name (you@example.org)
 * @date    2016-03-11 13:07:39
 * @version $Id$
 */

(function (w, factory) {
    if (w.view !== 'undefined') {
        factory(w);
    };
}(window, function (win) {
    'use strict';
    var menukey = 'menuIndex';

    function View() { }

    View.prototype.menuModule = function () {
        return {
            activeMenu: function (val) {
                if (val) {
                    win.localStorage.setItem(menukey, val);
                } else {
                    return win.localStorage.getItem(menukey);
                }
            },
            clearActiveMenu: function () {
                win.localStorage.removeItem(menukey);
            }
        };
    };

    View.prototype.message = function (url,entity) {
        var deffered = $.Deferred();

        $.ajax({
            url: url,
            type: 'post',
            dataType: 'json',
            data: JSON.stringify(entity), // JSON.stringify({ UserName: 'ddd', Pwd: 'd' }),
            contentType: 'application/json',
            success: function (response) {
                deffered.resolve(response);
            }
        });
        return deffered;
    }

    win.view = new View();
}));